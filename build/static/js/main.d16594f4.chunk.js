(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t.n(a),u=t(15),o=t.n(u),i=(t(21),t(4)),s=t(3),d=function(e){var n=e.search,t=e.searchName,a=e.addName;return Object(c.jsx)("form",{onSubmit:a,children:Object(c.jsxs)("div",{children:["filter shown with:"," ",Object(c.jsx)("input",{value:n,onChange:t})]})})},l=function(e){var n=e.newName,t=e.handleNameChange,a=e.newNumber,r=e.handleNumberChange,u=e.addName;return Object(c.jsxs)("form",{onSubmit:u,children:[Object(c.jsxs)("div",{children:["name:"," ",Object(c.jsx)("input",{value:n,onChange:t})]}),Object(c.jsxs)("div",{children:["number:"," ",Object(c.jsx)("input",{value:a,onChange:r})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.name,t=e.number,a=e.deleteName;return Object(c.jsxs)("li",{children:[n," ",t," ",Object(c.jsx)("button",{type:"button",onClick:a,children:"delete"})]})},j=function(e){var n=e.contactsToShow,t=e.deleteName;return Object(c.jsx)("ul",{children:n.map((function(e){return Object(c.jsx)(b,{name:e.name,number:e.number,deleteName:function(){return t(e)}},e.name)}))})},m=t(5),f=t.n(m),h="http://localhost:3001/api/persons",O={getAll:function(){return f.a.get(h).then((function(e){return e.data})).catch((function(e){return e.response.data}))},create:function(e){return f.a.post(h,e).then((function(e){return e.data})).catch((function(e){return e.response.data}))},update:function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data})).catch((function(e){return e.response.data}))},deleteName:function(e){return f.a.delete("".concat(h,"/").concat(e))}},p=function(e){var n=e.message,t=e.type;return null===n?null:"error"===t?Object(c.jsx)("div",{className:"error",children:n}):"success"===t?Object(c.jsx)("div",{className:"success",children:n}):null},v=function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)(""),o=Object(s.a)(u,2),b=o[0],m=o[1],f=Object(a.useState)(""),h=Object(s.a)(f,2),v=h[0],x=h[1],g=Object(a.useState)(""),N=Object(s.a)(g,2),w=N[0],C=N[1],S=Object(a.useState)(null),T=Object(s.a)(S,2),y=T[0],k=T[1],F=Object(a.useState)(null),L=Object(s.a)(F,2),A=L[0],D=L[1];Object(a.useEffect)((function(){O.getAll().then((function(e){r(e)}))}),[]);var I=function(e){if(e.preventDefault(),void 0!==t.find((function(e){return e.name===b}))){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===b})),c=Object(i.a)(Object(i.a)({},n),{},{number:v});O.update(n.id,c).then((function(e){e.error?(k(e.error),setTimeout((function(){k(null)}),5e3)):(r(t.map((function(n){return n.name===e.name?(n.number=e.number,n):n}))),m(""),x(""),D("Updated '".concat(b,"'")),setTimeout((function(){D(null)}),5e3))}))}}else{var a={name:b,number:v};O.create(a).then((function(e){e.error?(k(e.error),setTimeout((function(){k(null)}),5e3)):(r(t.concat(e)),m(""),x(""),D("Added '".concat(b,"'")),setTimeout((function(){D(null)}),5e3))}))}},P=""===w?t:t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(p,{message:A,type:"success"}),Object(c.jsx)(p,{message:y,type:"error"}),Object(c.jsx)(d,Object(i.a)({},{search:w,searchName:function(e){C(e.target.value)},addName:I})),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(l,Object(i.a)({},{newName:b,handleNameChange:function(e){m(e.target.value)},newNumber:v,handleNumberChange:function(e){x(e.target.value)},addName:I})),Object(c.jsx)(j,Object(i.a)({},{contactsToShow:P,deleteName:function(e){window.confirm("Delete ".concat(e.name,"?"))&&(O.deleteName(e.id).catch((function(){k("Information of '".concat(e.name,"' was already removed from server")),setTimeout((function(){k(null)}),5e3)})),r(t.filter((function(n){return n.id!==e.id}))))}}))]})},x=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,u=n.getTTFB;t(e),c(e),a(e),r(e),u(e)}))};o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root")),x()}},[[39,1,2]]]);
//# sourceMappingURL=main.d16594f4.chunk.js.map